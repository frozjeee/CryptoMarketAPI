<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta name="description" content="">
        <meta name="author" content="">
        <link href="https://fonts.googleapis.com/css?family=Playfair+Display:700,900" rel="stylesheet">
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
  
        <!-- jQuery library -->
        <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.slim.min.js"></script>
  
        <!-- Popper JS -->
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  
        <!-- Latest compiled JavaScript -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
        <link rel="stylesheet" href="/static/dashboard.css">
        <title>Orders</title>
        <!-- Bootstrap core CSS -->
        <!-- Custom styles for this template -->
        <style>
        .hover-div {
            background-color: white;
            transition: background-color 0.3s ease;
        }

        .hover-div:hover {
            background-color: lightgrey;
        }
        </style>
      </head>
<body>
    <div class="container">
        <header class="blog-header py-3">
            <div class="row flex-nowrap justify-content-between align-items-center">
                <div class="col-4 pt-1">
                    <a class="text-muted" href="#"></a>
                </div>
                <div class="col-4 text-center">
                    <h3 class="blog-header-logo text-dark" href="#">Large</h3>
                </div>
                <div class="col-4 d-flex justify-content-end align-items-center">
                    <a class="text-muted" href="#">
                        <!-- <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mx-3">
                            <circle cx="10.5" cy="10.5" r="7.5"></circle>
                            <line x1="21" y1="21" x2="15.8" y2="15.8"></line>
                        </svg> -->
                    </a>
                    <a class="btn btn-sm btn-outline-secondary" href="http://localhost:8000/login">Sign in</a>
                    <img id="logout" src="/static/logout.png" onclick="logout()" title="logout icon" width="22px" height="22px" style="display: none;">
                </div>
            </div>
        </header>
        <div class="nav-scroller py-1 mb-2">
            <nav class="nav d-flex justify-content-between">
                <a class="p-2 text-muted" href="http://localhost:8000/dashboard">Dashboard</a>
                <a class="p-2 text-muted" href="http://localhost:8000/orders">Orders</a>
                <a class="p-2 text-muted" href="http://localhost:8000/currencies">Currencies</a>
            </nav>
        </div>
        <hr>

        <div class="row">
            <div class="col">
                <h5><strong>Currency</strong></h5>
            </div>
            <div class="col">
                <h5><strong>Price</strong></h5>
            </div>
            <div class="col">
                <h5><strong>Quantity</strong></h5>
            </div>
            <div class="col">
                <h5><strong>Status</strong></h5>
            </div>
            <div class="col">
                <h5><strong>Type</strong></h5>
            </div>
        </div>
    </div>

    <script>
        const token = localStorage.getItem("token");
        // Fetch orders from the server
        fetch('http://localhost:8000/order', {
        method: "GET",
        headers: {
          "Content-Type": "application/json",
          "Authorization": "Bearer " + token
            }
        })
          .then(response => response.json()) // Assuming the response is in JSON format
          .then(orders => {
            // Process the orders and update the HTML
            const container = document.querySelector('.container');

        orders.forEach(order => {
          const row = document.createElement('div');
          row.classList.add('row', 'border', 'p-2', 'mt-2');

          const currencyCol = document.createElement('div');
          currencyCol.classList.add('col');
          currencyCol.textContent = order.currency.name;

          const priceCol = document.createElement('div');
          priceCol.classList.add('col');
          priceCol.textContent = order.price;

          const quantityCol = document.createElement('div');
          quantityCol.classList.add('col');
          quantityCol.textContent = order.quantity;

          const statusCol = document.createElement('div');
          statusCol.classList.add('col');
          statusCol.textContent = order.status;

          const typeCol = document.createElement('div');
          typeCol.classList.add('col');
          typeCol.textContent = order.type;

          row.appendChild(currencyCol);
          row.appendChild(priceCol);
          row.appendChild(quantityCol);
          row.appendChild(statusCol);
          row.appendChild(typeCol);

          container.appendChild(row);
        });
      })
      .catch(error => {
        console.error('Error retrieving orders:', error);
      });
      </script>
    <script src="/static/script.js"></script>
    <script src="/static/notlogged.js"></script>
</body>
</html>